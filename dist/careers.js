"use strict";(()=>{var y="https://api.ashbyhq.com/posting-api/job-board/Ekho";window.location.pathname==="/careers"&&fetch(y).then(l=>{if(!l.ok)throw new Error("Network response was not ok");return l.json()}).then(l=>{let f=l.jobs;console.log(f);let c=[],r=[],d=[],s={};f.forEach(function(t){if(t.employmentType&&!c.includes(t.employmentType)&&c.push(t.employmentType),t.team){let{team:e}=t;console.log(e),r.includes(e)||r.push(e),s[e]||(s[e]=[]),s[e].push(t)}t.location&&!d.includes(t.location)&&d.push(t.location)}),m("[data-dropdown-location]",d,"All"),m("[data-dropdown-team]",r,"All"),m("[data-dropdown-worktype]",c,"All");function m(t,e,n){let o=$(t);if(o.length){let a=o.find(".filter-dropdown_list-inner");a.empty(),a.append(`<a href="#" class="filter-dropdown_list-link w-inline-block active" data-value="all"><div>${n}</div></a>`),e.forEach(function(i){a.append(`<a href="#" class="filter-dropdown_list-link w-inline-block" data-value="${i}"><div>${i}</div></a>`)}),a.find(".filter-dropdown_list-link").off("click").on("click",function(i){i.preventDefault(),$(this).closest(".filter-dropdown_list-inner").find(".filter-dropdown_list-link").removeClass("active"),$(this).addClass("active"),h()})}}let p={getActiveFilters:function(){let t=$("[data-dropdown-location] .filter-dropdown_list-link.active"),e=$("[data-dropdown-team] .filter-dropdown_list-link.active"),n=$("[data-dropdown-worktype] .filter-dropdown_list-link.active");return{location:t.length?t.data("value"):"all",team:e.length?e.data("value"):"all",commitment:n.length?n.data("value"):"all"}},matchesFilters:function(t,e){let n=$(t);if(e.location!=="all"){let o=n.attr("data-location");if(!o||!o.includes(e.location))return!1}if(e.team!=="all"){let o=n.attr("data-team");if(!o||o!==e.team)return!1}if(e.commitment!=="all"){let o=n.attr("data-commitment");if(!o||o!==e.commitment)return!1}return!0}};function h(){let t=p.getActiveFilters(),e=0,n=$('[data-roles="item"]'),o=$('[data-roles="part"]');n.show(),o.show(),t.location==="all"&&t.team==="all"&&t.commitment==="all"?e=n.length:(n.each(function(){let i=$(this);p.matchesFilters(this,t)?(i.show(),e++):i.hide()}),o.each(function(){let i=$(this);i.find('[data-roles="item"]:visible').length===0?i.hide():i.show()})),$("[roles-counter]").text(e)}let u=$(".careers-roles_list"),w=$('[data-roles="part"]:first').clone(),v=$('[data-roles="item"]:first').clone();u.empty(),console.log(r),r.forEach(function(t){if(!s[t]||s[t].length===0)return;let e=w.clone();e.find('[data-roles="team-title"]').text(t);let n=e.find('[data-roles="team-list"]');n.empty(),s[t].forEach(function(o){let a=v.clone();a.find('[data-roles="item-title"]').text(o.title),a.find('[data-roles="item-location"]').text(o.location),a.find('[data-roles="item-commitment"]').text(o.employmentType||""),a.attr("href",o.jobUrl),a.attr("data-commitment",o.employmentType||""),a.attr("data-team",t),a.attr("data-location",o.location),n.append(a)}),u.append(e)}),$(".careers-roles_loading").hide(),$(".careers-roles_part").show(),h()}).catch(l=>console.error("Error fetching data:",l));})();
